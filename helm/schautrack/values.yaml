# Schautrack Helm Chart Values

replicaCount: 1

image:
  repository: ghcr.io/schaurian/schautrack
  pullPolicy: IfNotPresent
  # Overrides the image tag whose default is the chart appVersion
  tag: ""

imagePullSecrets: []

# Use an existing secret instead of creating one from values
# The secret must contain these keys:
#   - DATABASE_URL (required)
#   - SESSION_SECRET (required)
#   - POSTGRES_PASSWORD (required if postgresql.enabled)
#   - SMTP_USER (optional)
#   - SMTP_PASS (optional)
#   - AI_KEY (optional)
#   - AI_KEY_ENCRYPTION_SECRET (optional)
existingSecret: ""
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: false
  annotations: {}
  name: ""

podAnnotations: {}
podSecurityContext: {}
securityContext: {}

service:
  type: ClusterIP
  port: 3000

ingress:
  enabled: false
  className: ""
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # cert-manager.io/cluster-issuer: letsencrypt-prod
  hosts: []
    # - host: schautrack.local
    #   paths:
    #     - path: /
    #       pathType: Prefix
  tls: []
    # - secretName: schautrack-tls
    #   hosts:
    #     - schautrack.local

resources: {}
  # limits:
  #   cpu: 500m
  #   memory: 256Mi
  # requests:
  #   cpu: 100m
  #   memory: 128Mi

nodeSelector: {}
tolerations: []
affinity: {}

# Application configuration
config:
  # Port to listen on
  port: 3000
  # ⚠️  SECURITY WARNING: Change sessionSecret before production deployment!
  # Session secret (required) - generate with: openssl rand -base64 32
  # DO NOT commit real secrets to Git - use existingSecret instead
  sessionSecret: ""
  # Admin email - gets access to /admin page
  adminEmail: ""
  # Support email shown on support pages
  supportEmail: ""
  # Enable legal pages (/imprint, /privacy, /terms)
  enableLegal: false
  # Imprint page URL
  imprintUrl: "/imprint"
  # Imprint address (rendered as SVG, use \n for line breaks)
  imprintAddress: ""
  # Imprint email (rendered as SVG)
  imprintEmail: ""
  # Allow search engine indexing (sets ROBOTS_INDEX env var)
  robotsIndex: false
  # Base URL for SEO meta tags (leave empty to auto-detect from request)
  baseUrl: ""

# SMTP configuration (for password reset emails)
# ⚠️  SECURITY WARNING: SMTP credentials are sensitive! 
# Use existingSecret in production instead of storing passwords here
smtp:
  host: ""
  port: 587
  user: ""
  pass: ""  # DO NOT commit real passwords to Git
  from: ""
  secure: false

# AI configuration (optional)
# ⚠️  SECURITY WARNING: AI keys are sensitive and can incur costs!
# Use existingSecret in production - never commit API keys to Git
ai:
  # AI provider: openai, claude, or ollama
  provider: ""
  # API key for AI provider - DO NOT commit real keys to Git
  key: ""
  # Encryption secret for user API keys - generate with: openssl rand -hex 32
  # This must be kept secret and stable (changing it breaks existing user keys)
  keyEncryptionSecret: ""
  # Custom API endpoint (leave empty for defaults)
  endpoint: ""
  # Model override (e.g., gpt-4o, claude-sonnet-4-5-20250929, gemma3:12b)
  model: ""
  # Daily request limit per user when using global key (0 = unlimited)
  dailyLimit: 10

# PostgreSQL configuration
postgresql:
  # Enable bundled PostgreSQL (set to false to use external database)
  enabled: true
  image:
    repository: postgres
    tag: "18-alpine"
    pullPolicy: IfNotPresent
  # Database credentials  
  # ⚠️  SECURITY WARNING: Database passwords are critical secrets!
  # Use existingSecret in production - never commit passwords to Git
  auth:
    database: schautrack
    username: schautrack
    # Password (required) - generate with: openssl rand -base64 16
    # DO NOT use default passwords in production
    password: ""
  # Persistence configuration
  persistence:
    enabled: true
    # Use an existing PVC instead of creating one
    # If set, all other persistence options are ignored
    existingClaim: ""
    size: 5Gi
    # Storage class for dynamic provisioning
    # - "-" (default): disable dynamic provisioning (use pre-bound PV)
    # - "my-storage-class": use specific storage class
    storageClass: "-"
    accessMode: ReadWriteOnce
    # Annotations for the PVC (e.g., for backup tools like Velero)
    annotations: {}
    # Labels for the PVC
    labels: {}
  resources: {}
    # limits:
    #   cpu: 500m
    #   memory: 512Mi
    # requests:
    #   cpu: 100m
    #   memory: 256Mi

# External database (used when postgresql.enabled is false)
externalDatabase:
  # Full connection string: postgres://user:pass@host:port/db
  url: ""
